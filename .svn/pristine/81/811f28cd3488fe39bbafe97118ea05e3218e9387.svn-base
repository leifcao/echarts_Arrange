// let colorList = ['#5a6cec', '#168efe', '#2cd1c0', '#ffa06c', '#fedb65', '#8882f7', ] //圆饼的颜色
// 饼图
var pieChirtOne = document.getElementById('pieChirtFirst')
var pieChirtFirst = echarts.init(pieChirtOne)

pieChirtOneOption = {
    title: {
        text: '某站点用户访问来源',
        subtext: '纯属虚构',
        left: 'center',
        textStyle: {
            fontWeight: 'normal',
            fontSize: 14,
            color: textColor
        }
    },
    tooltip: {
        trigger: 'item',
        formatter: '{a} <br/>{b} : {c} ({d}%)',
    },
    legend: {
        orient: 'vertical',
        left: 'left',
        data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎'],
        textStyle: {
            fontWeight: 'normal',
            fontSize: 12,
            color: textColor
        }
    },
    color: colorList,
    series: [{
        name: '访问来源',
        type: 'pie',
        radius: '55%',
        // color: colorList,
        center: ['50%', '60%'],
        data: [
            { value: 335, name: '直接访问', },
            { value: 310, name: '邮件营销' },
            { value: 234, name: '联盟广告' },
            { value: 135, name: '视频广告' },
            { value: 1548, name: '搜索引擎' }
        ],
        emphasis: {
            itemStyle: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
        },
        animationType: 'scale',
        animationEasing: 'elasticOut',
        animationDelay: function(idx) {
            return Math.random() * 2000;
        }
    }],
    // animationDuration: 3000, //控制渲染速度
};
pieChirtFirst.setOption(pieChirtOneOption);



// 环形饼图
var pieChirtTwo = document.getElementById('pieChirtSecond')
var pieChirtSecond = echarts.init(pieChirtTwo)

let data = [{
        "name": "业务1",
        "value": 10
    }, {
        "name": "业务2",
        "value": 15
    }, {
        "name": "业务3",
        "value": 15
    },
    {
        "name": "业务4",
        "value": 25
    },
    {
        "name": "业务5",
        "value": 10
    },
    {
        "name": "业务6",
        "value": 25
    },
];

// 这步主要是为了让小圆点的颜色和饼状图的块对应，如果圆点的颜色是统一的，只需要把itemStyle写在series里面
let setLabel = (data) => {
    let opts = [];
    for (let i = 0; i < data.length; i++) {
        let item = {};
        item.name = data[i].name;
        item.value = data[i].value;
        item.label = {
            normal: {
                //控制引导线上文字颜色和位置,此处a是显示文字区域，b做一个小圆圈在引导线尾部显示
                show: true,
                //a和b来识别不同的文字区域
                formatter: [
                    '{a|{d}%  {b}}', //引导线上面文字
                    '{b|}' //引导线下面文字
                ].join('\n'), //用\n来换行
                rich: {
                    a: {
                        left: 20,
                        padding: [0, -80, -15, -80]
                    },
                    b: {
                        height: 5,
                        width: 5,
                        lineHeight: 5,
                        marginBottom: 10,
                        padding: [0, -5],
                        borderRadius: 5,
                        backgroundColor: colorList[i], // 圆点颜色和饼图块状颜色一致
                    }
                },

            }
        }

        opts.push(item)
    }
    return opts;
}
pieChirtTwoOption = {
    backgroundColor: '',
    animation: true,
    series: [{
        color: colorList,
        name: '饼图圆点',
        type: 'pie',
        radius: ['40%', '55%'],
        avoidLabelOverlap: false,
        labelLine: {
            normal: {
                show: true,
                length: 15, // 第一段线 长度
                length2: 100, // 第二段线 长度
                align: 'right'
            },
            emphasis: {
                show: true
            }
        },
        data: setLabel(data),
        animationType: 'scale',
        animationEasing: 'elasticOut',
        animationDelay: function(idx) {
            return Math.random() * 2000;
        }
    }],
    // animationDuration: 3000, //控制渲染速度
}
pieChirtSecond.setOption(pieChirtTwoOption)



// 玫瑰饼图
var pieChirtThree = document.getElementById('pieChirtThird')
var pieChirtThird = echarts.init(pieChirtThree)

var difData = [
    { value: 10, name: 'A区' },
    { value: 5, name: 'B区' },
    { value: 15, name: 'C区' },
    { value: 25, name: 'D区' },
    { value: 20, name: 'E区' },
    { value: 35, name: 'F区' },
    { value: 30, name: 'G区' },
]
pieChirtThreeOption = {

    tooltip: {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        x: '10',
        orient: 'vertical',
        y: 'center',
        data: ['A区', 'B区', 'C区', 'D区', 'E区'],
        textStyle: {
            color: textColor
        },
        itemWidth: 10,
        itemHeight: 8,
    },
    //设置饼状图每个颜色块的颜色
    color: colorList,
    calculable: true,
    series: [{
            name: '上传率',
            type: 'pie',
            radius: ['20%', '90%'],
            center: ['50%', '50%'],
            roseType: 'area',
            labelLine: { //折线问题
                normal: {
                    length: 5,
                    length2: 6,
                    lineStyle: {
                        type: 'solid'
                    }
                }
            },
            label: {
                normal: {
                    //饼形图显示格式
                    formatter: '{per|{d}%}',
                    rich: {
                        //设置百分比数字颜色
                        per: {
                            color: textColor,
                            fontSize: 10,
                            padding: [2, 4],
                            borderRadius: 2
                        }
                    }
                }
            },
            data: difData,
            animationType: 'scale',
            animationEasing: 'elasticOut',
            animationDelay: function(idx) {
                return Math.random() * 2000;
            }
        },

    ],
    // animationDuration: 9000, //控制渲染速度

};

pieChirtThird.setOption(pieChirtThreeOption)