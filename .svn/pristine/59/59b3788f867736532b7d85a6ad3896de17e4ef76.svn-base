// -------------------仪表盘-----------------
var dashboardOne = document.getElementById('dashboardFirst')
var dashboardFirst = echarts.init(dashboardOne)

let vale = 20
let splitNumber = 10
let startAngle = 225
let endAngle = -45

let endAngle2 = startAngle - (startAngle - endAngle) * (vale / 100)
let splitNumber2 = (startAngle - endAngle2) / 27

dashboardOneOption = {
    backgroundColor: "",
    series: [{
            center: ['50%', '60%'], // 仪表的位置
            name: '刻度', // 仪表的名字
            type: 'gauge', // 统计图类型为仪表
            radius: '70%', // 统计图的半径大小
            min: 0, // 最小刻度
            max: 100, // 最大刻度
            z: 2,
            splitNumber: splitNumber, // 刻度数量
            startAngle: startAngle, // 开始刻度的角度
            endAngle: endAngle, // 结束刻度的角度
            axisLine: { // 设置默认刻度盘上的刻度不显示，重新定义刻度盘
                show: false,
                lineStyle: {
                    width: 1,
                    color: [
                        [1, 'rgba(255,255,255,0)']
                    ]
                }
            }, // 仪表盘轴线

            axisTick: {
                show: true,
                splitNumber: 6, // 刻度的段落数
                lineStyle: {
                    color: '#22ea7c', //未占比的小刻度
                    width: 3 // 刻度的宽度
                },
                length: -12 // 刻度的长度
            }, // 刻度样式
            splitLine: { // 文字和刻度的偏移量
                show: true,
                length: 20, // 便宜的长度
                lineStyle: {
                    color: '#22ea7c', //未占比的大刻度
                    width: 3
                }
            } // 分隔线样式
        },
        {
            center: ['50%', '60%'], // 仪表的位置
            name: '刻度', // 仪表的名字
            type: 'gauge', // 统计图类型为仪表
            radius: '70%', // 统计图的半径大小
            min: 0, // 最小刻度
            max: 100, // 最大刻度
            z: 4,
            splitNumber: splitNumber2, // 刻度数量
            startAngle: startAngle, // 开始刻度的角度
            endAngle: endAngle2, // 结束刻度的角度
            axisLine: { // 设置默认刻度盘上的刻度不显示，重新定义刻度盘
                show: false,
                lineStyle: {
                    width: 1,
                    color: [
                        [1, 'rgba(255,255,255,0)']
                    ]
                }
            }, // 仪表盘轴线
            axisLabel: { // 仪表盘上的数据
                show: false
            }, // 刻度标签。
            axisTick: {
                show: true,
                splitNumber: 6, // 刻度的段落数
                lineStyle: {
                    color: '#ffa06c', //已占比的小刻度
                    width: 3 // 刻度的宽度
                },
                length: -12 // 刻度的长度
            }, // 刻度样式
            splitLine: { // 文字和刻度的偏移量
                show: true,
                length: 20, // 便宜的长度
                lineStyle: {
                    color: '#ffa06c', //已占比的大刻度
                    width: 3
                }
            } // 分隔线样式
        },

        {
            type: 'gauge', // 刻度轴表盘
            radius: '91%', // 刻度盘的大小
            center: ['50%', '60%'], // 刻度盘的位置
            splitNumber: 10, // 刻度数量
            // startAngle: 225, // 开始刻度的角度
            // endAngle: -45, // 结束刻度的角度
            startAngle: startAngle, // 开始刻度的角度
            endAngle: endAngle,
            z: 5,
            axisLine: { // 刻度的线条
                show: true,
                lineStyle: {
                    width: 1, // 定义一个宽15的数轴
                    color: [ // 颜色为渐变色
                        [1, '#ffa06c']
                    ]
                }
            },
            // 分隔线样式。
            splitLine: { // 表盘上的轴线
                show: false
            },
            axisLabel: { // 表盘上的刻度数值文字
                show: false
            },
            axisTick: { // 表盘上的刻度线
                show: false
            },
            pointer: { // 表盘上的指针
                show: true,
                length: '60%'
            },
            itemStyle: { // 表盘指针的颜色
                color: '#ffa06c',
                borderWidth: 1,
                borderColor: '#ffa06c'
            },
            title: {
                show: true,
                offsetCenter: [0, '70%'],
                color: '#ffa06c',
                fontSize: 16,
                borderRadius: 21,
                padding: 5
            },
            detail: {
                show: true,
                offsetCenter: [0, '44%'],
                color: '#73b0c5',
                formatter: function(params) {
                    return params + '%'
                },
                textStyle: {
                    fontSize: 16,
                    fontWeight: 'bold',
                    color: '#ffa06c' //字体颜色
                }
            },
            data: [{ name: '', value: vale }]
        },
        {
            name: '小圆形1',
            type: 'pie',
            center: ['50%', '60%'],
            hoverAnimation: false,
            legendHoverLink: false,
            radius: ['0%', '6%'],
            z: 10,
            label: {
                normal: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    show: false
                }
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 0,
                name: '1',
                itemStyle: {
                    normal: {
                        color: '#00A0E9'
                    }
                }
            }, {
                value: 100,
                name: '2',
                itemStyle: {
                    normal: {
                        color: '#00A0E9'
                    },
                    emphasis: {
                        color: '#00A0E9'
                    }
                }
            }]
        },
        {
            name: '小圆形2',
            type: 'pie',
            center: ['50%', '60%'],
            hoverAnimation: false,
            legendHoverLink: false,
            radius: ['6%', '10%'],
            z: 10,
            label: {
                normal: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    show: false
                }
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 0,
                name: '1',
                itemStyle: {
                    normal: {
                        color: '#fff'
                    }
                }
            }, {
                value: 100,
                name: '2',
                itemStyle: {
                    normal: {
                        color: '#fff'
                    },
                    emphasis: {
                        color: '#fff'
                    }
                }
            }]
        },
        {
            name: '小圆形3',
            type: 'pie',
            center: ['50%', '60%'],
            hoverAnimation: false,
            legendHoverLink: false,
            radius: ['10%', '12%'],
            z: 10,
            label: {
                normal: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    show: false
                }
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 0,
                name: '1',
                itemStyle: {
                    normal: {
                        color: '#e7e6e6'
                    }
                }
            }, {
                value: 100,
                name: '2',
                itemStyle: {
                    normal: {
                        color: '#3F6CA1'
                    },
                    emphasis: {
                        color: '#3F6CA1'
                    }
                }
            }]
        },
        {
            name: '小圆形4',
            type: 'pie',
            center: ['50%', '60%'],
            hoverAnimation: false,
            legendHoverLink: false,
            radius: ['14%', '12%'],
            z: 10,
            label: {
                normal: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    show: false
                }
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 0,
                name: '1',
                itemStyle: {
                    normal: {
                        color: '#00A0E9'
                    }
                }
            }, {
                value: 100,
                name: '2',
                itemStyle: {
                    normal: {
                        color: '#00A0E9'
                    },
                    emphasis: {
                        color: '#00A0E9'
                    }
                }
            }]
        }
    ],
    animationDuration: 7000, //控制渲染速度    
}

dashboardFirst.setOption(dashboardOneOption)


// -----颜色分类仪表盘--------
var dashboardFour = document.getElementById('dashboardFouth')
var dashboardFouth = echarts.init(dashboardFour)


dashboardFourOption = {
    tooltip: {
        formatter: '{a} <br/>{b} : {c}%'
    },
    toolbox: {
        feature: {
            restore: {},
            saveAsImage: {}
        }
    },
    series: [{
        name: '业务指标',
        type: 'gauge',
        radius: '84%', // 刻度盘的大小
        center: ['50%', '60%'], // 刻度盘的位置
        detail: { formatter: '{value}%' },
        axisLine: { // 坐标轴线  
            lineStyle: { // 属性lineStyle控制线条样式
                width: 12,
                color: [
                    [0.2, '#ffa06c'],
                    [0.8, '#2dcb74'],
                    [1, '#01a4f7']
                ]
            }
        },
        pointer: { //指针样式
            length: '50%',
            color: "#4A90E2"
        },
        title: {
            show: true,
            offsetCenter: [0, '70%'],
            color: '#333',
            fontSize: 12,
            backgroundColor: "rgba(220, 243, 230,0.8)",
            borderRadius: 21,
            padding: 5
        },
        detail: {
            formatter: "{score|{value}}",
            offsetCenter: [0, 0],
            backgroundColor: '#FFF',
            shadowColor: "#C3Cfff",
            shadowBlur: 14,
            borderRadius: 10,
            width: 8,
            rich: {
                score: {
                    color: "#333",
                    fontSize: 17,
                    padding: 2
                }
            }
        },
        splitLine: { // 文字和刻度的偏移量
            show: true,
            length: 18, // 便宜的长度
            lineStyle: {
                color: '#fff', //已占比的大刻度
                width: 2
            }
        }, // 分隔线样式
        data: [{ value: 50, name: '完成率' }]
    }]
};

// setInterval(function () {
//     option.series[0].data[0].value = (Math.random() * 100).toFixed(2) - 0;
//     dashboardFouth.setOption(dashboardFourOption, true);
// },2000);



dashboardFouth.setOption(dashboardFourOption)



// ---------动画占比图----------
var dashboardTwo = document.getElementById('dashboardSecond')
var dashboardSecond = echarts.init(dashboardTwo)


let angle = 0; //角度，用来做简单的动画效果的
let dashboardTwoValue = 55.33;
dashboardTwoOption = {
    backgroundColor: "",
    title: {
        text: '{a|' + dashboardTwoValue + '}{c|%}',
        x: 'center',
        y: 'center',
        textStyle: {
            rich: {
                a: {
                    fontSize: 18,
                    color: '#22ea7c'
                },

                c: {
                    fontSize: 20,
                    color: '#22ea7c',
                    // padding: [5,0]
                }
            }
        }
    },
    legend: {
        type: "plain",
        orient: "vertical",
        right: 0,
        top: "10%",
        align: "auto",
        data: [{
            name: '涨价后没吃过',
            icon: "circle"
        }, {
            name: '天天吃',
            icon: "circle"
        }, {
            name: '三五天吃一次',
            icon: "circle"
        }, {
            name: '半个月吃一次',
            icon: "circle"
        }],
        textStyle: {
            color: "white",
            fontSize: 16,
            padding: [10, 1, 10, 0]
        },
        selectedMode: false
    },
    series: [{
            name: "ring5",
            type: 'custom',
            coordinateSystem: "none",
            renderItem: function(params, api) {
                return {
                    type: 'arc',
                    shape: {
                        cx: api.getWidth() / 2,
                        cy: api.getHeight() / 2,
                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.75,
                        startAngle: (0 + angle) * Math.PI / 180,
                        endAngle: (90 + angle) * Math.PI / 180
                    },
                    style: {
                        stroke: "#22ea7c",
                        fill: "transparent",
                        lineWidth: 1.5
                    },
                    silent: true
                };
            },
            data: [0]
        }, {
            name: "ring5",
            type: 'custom',
            coordinateSystem: "none",
            renderItem: function(params, api) {
                return {
                    type: 'arc',
                    shape: {
                        cx: api.getWidth() / 2,
                        cy: api.getHeight() / 2,
                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.75,
                        startAngle: (180 + angle) * Math.PI / 180,
                        endAngle: (270 + angle) * Math.PI / 180
                    },
                    style: {
                        stroke: "#22ea7c",
                        fill: "transparent",
                        lineWidth: 1
                    },
                    silent: true
                };
            },
            data: [0]
        }, {
            name: "ring5",
            type: 'custom',
            coordinateSystem: "none",
            renderItem: function(params, api) {
                return {
                    type: 'arc',
                    shape: {
                        cx: api.getWidth() / 2,
                        cy: api.getHeight() / 2,
                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.8,
                        startAngle: (270 + -angle) * Math.PI / 180,
                        endAngle: (40 + -angle) * Math.PI / 180
                    },
                    style: {
                        stroke: "#22ea7c",
                        fill: "transparent",
                        lineWidth: 1.5
                    },
                    silent: true
                };
            },
            data: [0]
        }, {
            name: "ring5",
            type: 'custom',
            coordinateSystem: "none",
            renderItem: function(params, api) {
                return {
                    type: 'arc',
                    shape: {
                        cx: api.getWidth() / 2,
                        cy: api.getHeight() / 2,
                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.8,
                        startAngle: (90 + -angle) * Math.PI / 180,
                        endAngle: (220 + -angle) * Math.PI / 180
                    },
                    style: {
                        stroke: "#22ea7c",
                        fill: "transparent",
                        lineWidth: 1
                    },
                    silent: true
                };
            },
            data: [0]
        }, {
            name: "ring5",
            type: 'custom',
            coordinateSystem: "none",
            renderItem: function(params, api) {
                let x0 = api.getWidth() / 2;
                let y0 = api.getHeight() / 2;
                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.8;
                let point = getCirlPoint(x0, y0, r, (90 + -angle))
                return {
                    type: 'circle',
                    shape: {
                        cx: point.x,
                        cy: point.y,
                        r: 4
                    },
                    style: {
                        stroke: "#22ea7c", //粉
                        fill: "#22ea7c"
                    },
                    silent: true
                };
            },
            data: [0]
        }, {
            name: "ring5", //绿点
            type: 'custom',
            coordinateSystem: "none",
            renderItem: function(params, api) {
                let x0 = api.getWidth() / 2;
                let y0 = api.getHeight() / 2;
                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.8;
                let point = getCirlPoint(x0, y0, r, (270 + -angle))
                return {
                    type: 'circle',
                    shape: {
                        cx: point.x,
                        cy: point.y,
                        r: 4
                    },
                    style: {
                        stroke: "#22ea7c", //绿
                        fill: "#22ea7c"
                    },
                    silent: true
                };
            },
            data: [0]
        }, {
            name: '吃猪肉频率',
            type: 'pie',
            radius: ['68%', '55%'], //圆圈大小
            silent: true,
            clockwise: true,
            startAngle: 90,
            z: 0,
            zlevel: 0,
            label: {
                normal: {
                    position: "center",

                }
            },
            data: [{
                    value: dashboardTwoValue,
                    name: "",
                    itemStyle: {
                        normal: {
                            color: { // 完成的圆环的颜色
                                colorStops: [{
                                    offset: 0,
                                    color: '#37b16e' // 0% 处的颜色
                                }, {
                                    offset: 1,
                                    color: '#20ef7d' // 100% 处的颜色
                                }]
                            },
                        }
                    }
                },
                {
                    value: 100 - dashboardTwoValue,
                    name: "",
                    label: {
                        normal: {
                            show: false
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: "rgba(220, 243, 230,0.8)" //未占比的剩余部分
                        }
                    }
                }
            ]
        },

        {
            name: "",
            type: "gauge",
            radius: "68%", //中间间距的占比
            center: ['50%', '50%'],
            startAngle: 0,
            endAngle: 359.9,
            splitNumber: 8,
            hoverAnimation: true,
            axisTick: {
                show: false
            },
            splitLine: {
                length: 16,
                lineStyle: {
                    width: 5,
                    color: "#061740" //中间间距颜色
                }
            },
            axisLabel: {
                show: false
            },
            pointer: {
                show: false
            },
            axisLine: {
                lineStyle: {
                    opacity: 0
                }
            },
            detail: {
                show: false
            },
            data: [{
                value: 0,
                name: ""
            }]
        },

    ]
};

//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)
function getCirlPoint(x0, y0, r, angle) {
    let x1 = x0 + r * Math.cos(angle * Math.PI / 180)
    let y1 = y0 + r * Math.sin(angle * Math.PI / 180)
    return {
        x: x1,
        y: y1
    }
}

function draw() {
    angle = angle + 3
    dashboardSecond.setOption(dashboardTwoOption, true)
        //window.requestAnimationFrame(draw);
}

setInterval(function() {
    //用setInterval做动画感觉有问题
    draw()
}, 100);



dashboardSecond.setOption(dashboardTwoOption)




// --------------水环图--------------
var dashboardThree = document.getElementById('dashboardThird')
var dashboardThird = echarts.init(dashboardThree)


var dashboardThreeValue = 0.48;
var dashboardThreeData = [dashboardThreeValue, dashboardThreeValue, dashboardThreeValue, dashboardThreeValue, dashboardThreeValue, ];
dashboardThreeOption = {

    series: [{
        type: 'liquidFill',
        radius: '80%',
        data: dashboardThreeData,
        // data: [],
        color: ['#2aaf66', '#38b470', '#49d088'],
        backgroundStyle: {
            borderWidth: 2,
            borderColor: 'rgb(214, 193, 0)',
            color: 'rgb(255,0,255,0.01)'
        },
        outline: { //外边
            // show: false
            borderDistance: 5,
            itemStyle: {
                borderWidth: 4,
                borderColor: 'rgb(25, 230, 117)',
            },
        },
        label: {
            normal: {
                // formatter: (utilizationValue * 100).toFixed(0) + '%',
                formatter: dashboardThreeValue * 100 + '%',
                textStyle: {
                    fontSize: 12
                }
            }
        }
    }],
};


dashboardThird.setOption(dashboardThreeOption)